<!doctype html>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Verifying…</title>
<script>
(function() {
  const params = new URLSearchParams(location.search);
  const target = (params.get('target') || 'web').toLowerCase();
  const hash = location.hash || ''; // includes #access_token=...

  function redirectToWeb() {
    location.replace('https://booking.privilist.com/router' + hash);
  }

  function redirectToApp() {
    // Use custom URL scheme
    const customScheme = 'privilist://privilist.com/router' + hash;
    location.href = customScheme;
    
    // Fallback to web if app doesn't open within 1.5s
    setTimeout(redirectToWeb, 1500);
  }

  function redirect() {
    if (target === 'app') {
      redirectToApp();
    } else {
      redirectToWeb();
    }
  }

  // Auto-redirect after a brief moment
  setTimeout(redirect, 300);
})();
</script>
<body style="font-family: system-ui; display:grid; place-items:center; min-height:100svh;">
  <div>
    <h1>Hold on…</h1>
    <p>We're verifying your link.</p>
  </div>
</body>
